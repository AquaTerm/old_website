<HTML>		<HEAD>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<TITLE>			Appendix C - Optimization		</TITLE>		</HEAD>	<BODY bgcolor="#ffffff"><h2>C. How do I speed up the communication between the adapter and AquaTerm?</h2><p>This is how:<BR> Every message sent to AquaTerm has an overhead of just under 1 ms. By buffering objects before sending them the speed is increased.</p>Extending the simple example from previous section with buffering is pretty easy.<BR><b>Boldface</b> indicates added code, <strike>strikethrough</strike> removed code and ... snipped sections of code.<pre> @interface AQTAdapter : NSObject{  <b>NSBezierPath *buffer;</b>  @private  id aqtConnection;}...@end @implementation AQTAdapter- (id)init{  <b>buffer = [NSBezierPath bezierPath];</b>  if (self = [super init])  ...}- (void)dealloc{  <b>[buffer release];</b>  [aqtConnection release];  [super dealloc];}- (void)closeGraph{  <b>//  // Before closing, check if the buffers needs to be drawn...  //  if (![buffer isEmpty])    [aqtConnection addPolyline:buffer withIndexedColor:0];</b>  [aqtConnection closeModel];}- (void)lineFromPoint:(NSPoint)startpoint toPoint:(NSPoint)endpoint{  ...    [thePath lineToPoint:endpoint];  <b>//  // Instead of sending it to AQT, we store the new segment in a buffer:  //  [buffer appendBezierPath:thePath];</b>  <strike>[aqtConnection addPolyline:thePath withIndexedColor:0];</strike>}</pre> <p>This simple example only need to flush the buffer on a closeGraph call, but a real adapter would have to flush the buffer on certain occations, e.g. before a change of color.</p>More to come...<br><br><br> </BODY></HTML>  