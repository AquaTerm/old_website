<HTML>		<HEAD>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<TITLE>			Appendix A		</TITLE>		</HEAD>	<BODY bgcolor="#ffffff"><h2>A. How to use AquaTerm to display graphic output from your legacy code</h2><p> Consider the case where there exists an old app written in C, using  stdio for input and output, and some plotting library (lets call it  C_API, with header C_API.h) that produces a postscript file with a graph  that is the result of complicated math.</p>  C_API.h btw looks like this  <pre> // ---- C_API.h ---- void openGraph(int n); void closeGraph(void); void line(int x1, int y1, int x2, int y2); void putText(int x, int y, const char *str); // ---- end of file ----</pre>  <p>Now you have just spent an enormous amount of money on a new PowerMac G4  and want to run your old program faster than ever but also to take  advantage of that glossy new windowing system, Aqua.</p>  <p>The solution is to use Aquaterm, which brings you native graphics  display with a minimum of effort. This is how:</p> Your old program "hello.c": <pre> // ---- hello.c ---- #include "C_API.h"  int main(void) {    //    // A "Hello!" program    //    openGraph(1);    putText(400,400,"Hello Postscript!");    line(390, 380, 550, 380);    closeGraph();    return 0; } // ---- end of file ----</pre>  that when compiled like so  <kbd>cc hello.c C_API.o -o hello</kbd>  produces the output file hello_1.ps  <p>To run it with AquaTerm displaying the graphics will not require _any_  changes to hello.c but it _will_ require that you replace the object  file C_API.o with an "adapter"-file named adapter.m (explained in a  little more deatil below) which implements the functions defined in  C_API.h and translates them into messages that is sent to AquaTerm.</p>  The new compile session will be  <kbd>cc hello.c adapter.m -o hello -framework Foundation -framework AppKit</kbd>  where the most notable change is that we link against the Foundation and  AppKit frameworks. See  <a href="http://developer.apple.com/techpubs/macosx/Essentials/SystemOverview/index" target="_blank">http://developer.apple.com/techpubs/macosx/Essentials/SystemOverview/index.html</a> for more info on frameworks.    The genaral strategy in writing an adapter is outlined in <a name="#figure1">Figure 1</a>  and the design for this particular example is shown in <a nema="#figure2">Figure 2</a>.  Commented code:<dir compact>	<li><a href="hello.c.html" target="_blank">hello.c</a></li>	<li><a href="adapter.m.html" target="_blank">adapter.m</a></li></dir><br><br clear="all"><img src="art/figure1.html" alt="" align="left"><br clear="all"><img src="art/figure2.html" alt="" align="left"><br clear="all"><br> </BODY></HTML>  